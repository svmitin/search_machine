# Поисковая система Freedom

В настоящий момент нет инструкции по ручному локальному развертыванию проекта, 
а так-же деплою на VPS или использованию с Kubernetes. Только локальный запуск в Docker для разработки.

## Текущая стадия развития. Backlog

Проект в состоянии MVP. Он работает, но нуждается в следующих доработках для запуск в продакшн:
* добавление возможности для пользователей/SEO-специалистов ручного добавления сайтов в очередь индексации (с выдачей JS-кодов метрик)
* нужны алгоритмы ранжирования поисковой выдачи на основе предыдущего шага
* переориентирование поисковой системы на работу в (i2p)[https://ru.wikipedia.org/wiki/I2P] ((i2pd)[https://i2pd.website/] роутер) и/или (yggdrasil)[https://ru.wikipedia.org/wiki/Yggdrasil] сетях
* добавление локализации для пользователей не знающих русский язык
* добавление возможности деплоя на VPS посредством (Ansible)[https://ru.wikipedia.org/wiki/Ansible]
* повторная индексация уже посещенных страниц для обновления информации
* по неизвестной причине через какое-то время сетевые краулеры перестают работать (зависают)
* нет уверенности, что полнотекстовый поиск будет работать при большом объеме данных в PostgreSQL

## Структура проекта

- __backend/__ - Бэкэнд часть поисковой системы. Предоставляет API и административную панель. Приложение реализовано на Django
- __deploy/__ - Скрипты для развертывания проекта в Docker для нужд разработки. Возможно здесь в будущем появятся скрипты Ansible для деплоя на VPS
- __frontend/__ - Браузерное веб-приложение. Написанно на Vue.js 3 версии
- __spyder/__ - Сетевой краулер для обхода веб-страниц и их индексации. Написан на Python3 с использованием библиотек requests, BeautifulSoup, SQLAlchemy


## Локальный запуск с использованием Docker

Сборка запуск проект происходит в три шага:
* создание базового образа. Здесь же будут запрошены логин/пароль администратора
* запуск веб-сервера
* запуск сетевых краулеров
```
make install
make run_backend
make run_spyders
```

Далее нужно внести изменения в файл `/etc/hosts`:
```ini
# SearchMachime
127.0.0.1       freedom.com
```

Для просмотра страницы нужно открыть URL (http://freedom.com:8000/)[http://freedom.com:8000/]
Административная панель (http://freedom.com:8000/admin)[http://freedom.com:8000/admin]

**Примечания**
* В если в файле backend/search/migrations/0001_initial.py будет изменена только дата, 
данные изменения следует отменить

## Команды Docker
```bash
make install        # Подготовить окружение
make remove         # Уничтожить все контейнеры. Работает с переменным успехом
make down           # Завершить все контейнеры
make run_backend    # Запускает бэкэнд приложение Django для API и Административной панели
make stop_backend   # Завершает бэкэнд приложение Django
make run_spyders    # Запускает 3 сетевых краулера
make stop_spyders   # Завершает работу сетевых краулеров
make migrate        # Выполняет миграции
make backup         # Завершает работу сетевых краулеров и создает дамп БД в файле `dump.sql`
make admin          # Регистрирует нового администратора
make psql           # Запускает утилиту psql
make ps             # Статус контейнеров
make df             # Проверить расход памяти
```

## License
BSD 2-Clause License

## Project status
Active